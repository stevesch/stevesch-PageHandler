!function n(o,r,i){function c(t,e){if(!r[t]){if(!o[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(s)return s(t,!0);throw(a=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",a}a=r[t]={exports:{}},o[t][0].call(a.exports,function(e){return c(o[t][1][e]||e)},a,a.exports,n,o,r,i)}return r[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)c(i[e]);return c}({1:[function(e,t,a){"use strict";!function(){var L;document.addEventListener("DOMContentLoaded",function(){function n(e,t){var a=new XMLHttpRequest,n="/api/set?name=";n+=escape(e),n+="&value=",n+=escape(t),a.open("GET",n,!0),a.send()}function r(){n(this.dataset.varname,this.checked?"1":"0")}function i(){this.checked&&n(this.dataset.varname,this.value)}function c(){var e,t,a;this.dataset.varname?n(this.dataset.varname,e=""===(e=this.value)||void 0===e?1:e):this.dataset.getapi&&(e=this.dataset.getapi,t=this.dataset.target,(a=new XMLHttpRequest).open("GET",e,!0),t&&(a.onload="document"===t?function(){document.open(),document.write(a.responseText),document.close()}:function(){var e=document.getElementById(t);e&&(e.innerHTML=a.responseText)}),a.send())}function s(){n(this.dataset.varname,this.value),this.dataset.clear&&(this.value="")}window.reflections||(window.reflections=[],console.log("WARNING, PageHandler: No reflections defined on page."));var t=window.reflections;t&&1===t.length&&"%REFL_LIST%"===t[0]&&(console.log("WARNING, PageHandler: reflections not replaced by server."),t.length=0);L&&(L.addEventListener("message",function(e){o=0,console.log("message",e.data)},!1),document.querySelectorAll("[data-varinner]").forEach(function(e){e=e.dataset.varinner;t.includes(e)||(console.log("Unregistered var (".concat(e,") added to reflection list ")),t.push(e))}),t.forEach(function(e){var t,a,n;t=L,e="[data-varinner=".concat(a=e,"]"),n=document.querySelectorAll(e),t.addEventListener(a,function(e){o=0;var t=e.data;n.forEach(function(e){e.innerHTML=t})},!1)}),document.querySelectorAll(".watcher").forEach(function(t){var a,e=t.dataset.varname;if(t.dataset.varscript)a=new Function("event",t.dataset.varscript);else switch(t.type){case"checkbox":a=f;break;case"radio":a=u;break;default:a=l}console.log("Adding watcher for ".concat(e)),L.addEventListener(e,function(e){o=0,a.call(t,e)},!1)}),document.querySelectorAll(".sender").forEach(function(t){var a,e="change";switch(t.type){case"checkbox":a=r;break;case"radio":a=i;break;case"button":case"submit":a=c,e="click";break;default:a=s}var n=t.dataset.varname||t.dataset.getapi;console.log("Adding sender for ".concat(n));function o(e){return a.call(t,e)}t.dataset.sendtypes?(n="".concat(t.dataset.sendtypes).match(/\b(\w+)\b/g))&&n.forEach(function(e){e&&t.addEventListener(e,o)}):t.addEventListener(e,o)}),document.querySelectorAll("input[type='range'].tip").forEach(function(e){var t,a,n=document.createElement("output");n.className="bubble",e.parentElement.appendChild(n),t=e,a=n,console.log("Attaching range tip to ".concat(t.dataset.varname)),t.addEventListener("input",function(){d(t,a)}),d(t,a)}),document.querySelectorAll(".chartEl").forEach(function(e){var t,a,c,n,s,d,o,r,l,u,f,h,v,p,g,m,w,b,i,E=e.dataset.varname;function y(){i&&(clearTimeout(i),i=null),i=setTimeout(x,d)}function k(e,t){var a,n,o,r,i,a=(a=e,n=t,o=d,i=l.length-1,t=!1,(t=c?a-c<o:t)?(g=Math.min(g,n),m=Math.max(m,n),p+=n,w+=1,r=b?p/w:n,l[i]=a.getTime(),f[i]=r,u[i]=g,h[i]=m):(w=1,r=p=m=g=n,l.push(a.getTime()),f.push(r),u.push(r),h.push(r),0<=i&&(c=a)),!0);(a=function(e,t){for(var a=!1;l.length;){if(!(t<e-l[0]))break;l.shift(),f.shift(),u.shift(),h.shift(),a=!0}return a}(e,s)?!0:a)&&v.update(),y()}function x(){var e,t=f.length-1;0<=t&&(e=Date.now(),k(new Date(e),f[t]))}console.log("Adding chart for ".concat(E)),a=E,n=(t=e).getContext("2d"),s=1e3*A(t.dataset.xmax,3600),d=1e3*A(t.dataset.xinterval,5),o=A(t.dataset.ymin,0),r=A(t.dataset.ymax,255),E={labels:[],datasets:[{fill:1,backgroundColor:"rgba(128,128,220,0.2)",borderColor:"rgba(128,128,220,0.1)",pointRadius:0,pointHitRadius:0,data:[]},{label:"Data: ".concat(a),strokeColor:"rgba(0,0,0,0.75)",pointRadius:0,pointHitRadius:0,fill:!1,data:[]},{fill:1,backgroundColor:"rgba(220,128,128,0.2)",borderColor:"rgba(220,128,128,0.1)",pointRadius:0,pointHitRadius:0,data:[]}]},l=E.labels,u=(e=E.datasets)[0].data,f=e[1].data,h=e[2].data,v=new Chart(n,{type:"line",data:E,options:{legend:{display:!1},elements:{line:{tension:.1}},animation:{},scales:{xAxes:[{gridLines:{drawOnChartArea:!1,drawTicks:!1},ticks:{display:!1}}],yAxes:[{gridLines:{drawTicks:!1},ticks:{display:!1,min:o,max:r}}]}}}),w=m=g=p=0,b=t.dataset.average,i=null,L.addEventListener(a,function(e){var t=Date.now(),e=parseInt(e.data,10);k(new Date(t),e)},!1)}));setInterval(function(){2<(o+=1)&&(console.log("No communication from server for ".concat(4e3*o*.001," seconds")),3<o&&(o=0,console.log("Reloading page..."),window.location.reload()))},4e3)},!1),window.EventSource&&(L=new EventSource("/events"));var o=0;function A(e,t){return void 0!==e?parseFloat(e):t}var t=["0","false","undefined","null",""];function d(e,t){var a=e.value,n=e.min||0,e=e.max||100,n=Number(100*(a-n)/(e-n));t.innerHTML=a,t.style.left="calc(".concat(50+.72*(n-50),"%)")}function l(e){this.value=e.data}function u(e){this.checked=e.data==this.value}function f(e){this.checked=0!=(e=e.data)&&!t.includes(String(e))}}()},{}]},{},[1]);