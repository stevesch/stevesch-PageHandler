!function n(o,r,i){function s(t,e){if(!r[t]){if(!o[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(c)return c(t,!0);throw(a=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",a}a=r[t]={exports:{}},o[t][0].call(a.exports,function(e){return s(o[t][1][e]||e)},a,a.exports,n,o,r,i)}return r[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,a){!function(){var L;document.addEventListener("DOMContentLoaded",function(){window.reflections||(window.reflections=[],console.log("WARNING, PageHandler: No reflections defined on page."));reflections=window.reflections,reflections&&1==reflections.length&&"%REFL_LIST%"===reflections[0]&&(console.log("WARNING, PageHandler: reflections not replaced by server."),reflections.length=0);{function n(e){this.value=e.data}function o(e){this.checked=e.data==item.value}function r(e){this.checked=0!=(e=e.data)&&!t.includes(String(e))}function i(e,t){var a=new XMLHttpRequest,n="/api/set?name=";n+=escape(e),n+="&value=",n+=escape(t),a.open("GET",n,!0),a.send()}function s(e){i(this.dataset.varname,this.checked?"1":"0")}function c(e){this.checked&&i(this.dataset.varname,this.value)}function d(e){var t,a,n;this.dataset.varname?i(this.dataset.varname,t=""===(t=this.value)||void 0===t?1:t):this.dataset.getapi&&(t=this.dataset.getapi,a=this.dataset.target,(n=new XMLHttpRequest).open("GET",t,!0),a&&(n.onload="document"===a?function(){document.open(),document.write(n.responseText),document.close()}:function(){var e=document.getElementById(a);e&&(e.innerHTML=n.responseText)}),n.send())}function l(e){i(this.dataset.varname,this.value),this.dataset.clear&&(this.value="")}L&&(L.addEventListener("message",function(e){u=0,console.log("message",e.data)},!1),document.querySelectorAll("[data-varinner]").forEach(function(e){e=e.dataset.varinner;reflections.includes(e)||(console.log("Unregistered var ("+e+") added to reflection list "),reflections.push(e))}),reflections.forEach(function(e){var t,a,n;t=L,e="[data-varinner="+(a=e)+"]",n=document.querySelectorAll(e),t.addEventListener(a,function(e){u=0;var t=e.data;n.forEach(function(e){e.innerHTML=t})},!1)}),document.querySelectorAll(".watcher").forEach(t=>{var a,e=t.dataset.varname;if(t.dataset.varscript)a=new Function("event",t.dataset.varscript);else switch(t.type){case"checkbox":a=r;break;case"radio":a=o;break;default:a=n}console.log("Adding watcher for "+e),L.addEventListener(e,function(e){u=0,a.call(t,e)},!1)}),document.querySelectorAll(".sender").forEach(t=>{var a,e="change";switch(t.type){case"checkbox":a=s;break;case"radio":a=c;break;case"button":case"submit":a=d,e="click";break;default:a=l}var n=t.dataset.varname||t.dataset.getapi;console.log("Adding sender for "+n);function o(e){a.call(t,e)}t.dataset.sendtypes?(n=(""+t.dataset.sendtypes).match(/\b(\w+)\b/g))&&n.forEach(function(e){e&&t.addEventListener(e,o)}):t.addEventListener(e,o)}),function(){const e=document.querySelectorAll("input[type='range'].tip");function o(e,t){var a=e.value,n=e.min||0,e=e.max||100,n=Number(100*(a-n)/(e-n));t.innerHTML=a,t.style.left=`calc(${50+.72*(n-50)}%)`}e.forEach(e=>{const t=document.createElement("output");var a,n;t.className="bubble",e.parentElement.appendChild(t),a=e,n=t,console.log("Attaching range tip to "+a.dataset.varname),a.addEventListener("input",()=>{o(a,n)}),o(a,n)})}(),document.querySelectorAll(".chartEl").forEach(e=>{var t,a,n,s,c,o,r,d,l,u,f,v,h,p,g,m,b,w,i,E=e.dataset.varname;function y(){var e,t=u.length-1;0<=t&&(e=Date.now(),x(new Date(e),u[t]))}function k(){i&&(clearTimeout(i),i=null),i=setTimeout(y,c)}function x(e,t){var a,n,o,r,i,a=(a=e,n=t,o=c,i=d.length-1,t=!1,(t=b?a-b<o:t)?(p=Math.min(p,n),g=Math.max(g,n),h+=n,++m,r=w?h/m:n,d[i]=a.getTime(),u[i]=r,l[i]=p,f[i]=g):(m=1,r=h=g=p=n,d.push(a.getTime()),u.push(r),l.push(r),f.push(r),0<=i&&(b=a)),!0);(a=function(e,t){for(var a=!1;d.length;){if(!(t<e-d[0]))break;d.shift(),u.shift(),l.shift(),f.shift(),a=!0}return a}(e,s)?!0:a)&&v.update(),k()}console.log("Adding chart for "+E),a=E,n=(t=e).getContext("2d"),s=1e3*A(t.dataset.xmax,3600),c=1e3*A(t.dataset.xinterval,5),o=A(t.dataset.ymin,0),r=A(t.dataset.ymax,255),d=(E={labels:[],datasets:[{fill:1,backgroundColor:"rgba(128,128,220,0.2)",borderColor:"rgba(128,128,220,0.1)",pointRadius:0,pointHitRadius:0,data:[]},{label:"Data: "+a,strokeColor:"rgba(0,0,0,0.75)",pointRadius:0,pointHitRadius:0,fill:!1,data:[]},{fill:1,backgroundColor:"rgba(220,128,128,0.2)",borderColor:"rgba(220,128,128,0.1)",pointRadius:0,pointHitRadius:0,data:[]}]}).labels,l=(e=E.datasets)[0].data,u=e[1].data,f=e[2].data,v=new Chart(n,{type:"line",data:E,options:{legend:{display:!1},elements:{line:{tension:.1}},animation:{},scales:{xAxes:[{gridLines:{drawOnChartArea:!1,drawTicks:!1},ticks:{display:!1}}],yAxes:[{gridLines:{drawTicks:!1},ticks:{display:!1,min:o,max:r}}]}}}),b=void(m=g=p=h=0),w=t.dataset.average,i=null,L.addEventListener(a,function(e){var t=Date.now(),e=parseInt(e.data);x(new Date(t),e)},!1)}))}setInterval(function(){2<++u&&(console.log("No communication from server for "+4e3*u*.001+" seconds"),3<u&&(u=0,console.log("Reloading page..."),location.reload()))},4e3)},!1),window.EventSource&&(L=new EventSource("/events"));var u=0;function A(e,t){return void 0!==e?parseFloat(e):t}var t=["0","false","undefined","null",""]}()},{}]},{},[1]);